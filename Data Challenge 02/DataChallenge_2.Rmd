---
title: "Data Challenge 2 --- Group 5"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Question 2

## Hypothesis 1
Our first hypothesis is that there will be more total overall deaths if army was involved in the confrontation, regardless of the scale of the combat. 

#### Assumptions
The assumption is that a confrontation was of a larger scale if there were more vehicles and long guns seized in that event. This is based on 4 sub-assumptions:

1. More vehicles and long guns seized means more vehicles and long guns were used in the confrontation
2. More participating forces if more vehicles were used
3. More vehicles also added complexitiy to the combat, such as explosion and defense 
4. More long guns means participants could be murdered within a longer distance

#### Computations
The marginal effect referenced was the "B" column provided by the regression model and is interpreted as described in the marginal effect section below. The "B" value represents the slope of the regression line for the variable of interest. To arrive at standard error and confidence intervals by running OLS, the results are reflected in "std.Error" and "CI" columns, respectively, the CIs are 95% confidence interval. The 95% confidence intervals represent +/- two standard errors from the mean "B" marginal effect value. Computation methods for hypothesis 1 and 2 are the same.

#### Findings
Below is an exhibition of our findings. The result demonstrates that there are more deaths if army was involved in the confrontation, regardless of the scale of the combat, which agrees with our hypothesis.

The marginal effect of the involvement of army on deaths is 0.16(95% confidence interval range of .03 to .28), on average, ceteris paribus. This effect is statistically significant at a 95% confidence level. The marginal effects of `vehicles.seized` and `long.guns.seized` are both positive and significant as well. The interactions show that if the army is involved each additional vehicle seized has a marginal effect of at 0.00 (95% confidence interval of -0.01 – 0.02) on average total overall deaths, certis paribus. It also shows that if the army is involved each additional long gun seized has a marginal effect of at -0.12 (95% confidence interval of -0.01 – 0.02) on average total overall deaths, certis paribus.  The interaction does show that army involvement will decreases the marginal effect of long guns seized at -0.12 (95% confidence interval of -0.15 – -0.09) . 

```{r, echo = FALSE, warnings = FALSE, message = FALSE}
all_violence <- read.csv("/Users/bobchen/Documents/Columbia/S17/5069 Applied Data Science/QMSS-GR5069/week_07/datachallenge2/data/processed/AllViolenceData_170216.csv")

lm1 <- lm(total.people.dead ~ army + vehicles.seized * army + long.guns.seized * army, data = all_violence)
library(sjPlot)
sjt.lm(lm1, show.se = TRUE)
```

#### Limitations
The limitations of our interference are:

1. the marginal effects of vehicles and long guns seized might not linear(addictive), but our model fails to detect if this is true
2. the marginal effect of army could be so overwhelming large that our result might not differ a lot from the one that evaluate the marginal effects of army with no interactions at all
3. there might be multicollinearity because armys use vehicles and long guns a lot

## Hypothesis 2  
Our conditional hypothesis is that the total number of people dead is conditional upon the interaction between which federal force was involved and how many people were detained. We predict that if the army/navy/federal police is involved in an event each additional person detained results in a lower number of total people dead on average. The rational behind this prediction is that if there an event with federal forces ends with detained people, it is likely to be less deadly. 
Below is the multi-variate regression model with interactions to test this hypothesis: 

#### Assumptions 
`navy`, `army`, and `federal police` are binary variables in which 1 = they were involved in an event and 0 = they were not involved in an event. `total.people.dead` and `detained` are numeric variables in that increase by one from 0 up each representing an additonal person dead or detained. Additionally in order to preform the analysis we assumed that in each event only the army, navy, or federal police were present alone at each event. 

```{r  echo = FALSE}
lm2 <- lm(total.people.dead ~ navy + army + federal.police + detained + detained * navy + detained * army + detained * federal.police, data = all_violence)
sjt.lm(lm2, show.se = TRUE)
```

#### Marginal Effects 
__Intercept__ 
The intercept in the regression output above shows that if no navy, army, or federal police were involved an if no one was detained, the average number of total people dead is 1.03. 
__Coeffiencts__ 
Given this is a conditional interaction, the model shows that if the navy is involved and no one is detained on average .43 (95% confidence interval range of .06 to .84) more people  killed overall, holding all other variables constant with statistical signifiance (p-value of at least .05). If the army is involved and no one is detained on average .37 (95% confidence interval range of .25 to .52) more people  killed overall, holding all other variables constant with statistical signifiance (p-value of at least .05). If the federal police is involved and no one is detained on average -.25 (95% confidence interval range of -.47 to -.05) less people killed overall, holding all other variables constant with statistical signifiance (p-value of at least .05). Additionally for each additional detained person when no one from the navy, army, or federal police is involved on average .04 (95% confidence interval range of .02 to .06) more people killed overall, holding all other variables constant with statistical signifiance (p-value of at least .05).
__Interactions__ 
The interation terms show that if the navy is involved, each additional detained person recorded in the event results in on average .17 (95% confidence interval of .07 to .26) more people killed overall , holding all other variables constant with statistical signifiance (p-value of at least .05). If the army is involved, each additional detained person recorded in the event results in on average -.09 (95% confidence interval of -.15 to -.03) less people killed overall , holding all other variables constant with statistical signifiance (p-value of at least .05). Finally if the federal police are involved each additional detained person recorded in the event results in on average .06 (95% confidence interval of .00 to .12) more people killed overall, holding all other variables constant with statistical signifiance (p-value of at least .05).  
__Conclusion__ 
The hypothesis stated proved to be partial true per the data. In the case of the navy and federal police, each indivial detained person recorded actual resulted in an increase in average overall deaths which is contrary to the prediction. In the case of the army, each individual detained person recorded resulted in a decrease in average overall deaths. 

#### Limitations
The data is limited as the data is only provides information for a few year period of time in certain locations in mexico. The regression focuses on total people dead and did not segregate the analysis by which type of person died in each event.As such more detailed analysis would have to be preformed to get more insight on what type of person dies as more people are detained by certain armed forces. Additionally it is possible that the army, navy, and federal police were all at certain events which would complicate the analysis of the data as they are interrelated. 

# Codes

```{r, eval = FALSE}
all_violence <- read.csv("/Users/bobchen/Documents/Columbia/S17/5069 Applied Data Science/QMSS-GR5069/week_07/datachallenge2/data/processed/AllViolenceData_170216.csv")

lm1 <- lm(total.people.dead ~ army + vehicles.seized * army + long.guns.seized * army, data = all_violence)
library(sjPlot)
sjt.lm(lm1, show.se = TRUE)

lm2 <- lm(total.people.dead ~ navy + army + federal.police + detained + detained * navy + detained * army + detained * federal.police, data = all_violence)
sjt.lm(lm2, show.se = TRUE)
```
